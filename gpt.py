import os
import openai

openai.api_key = "sk-whoops"
test_prompt = " Banking Rates: High Yield Accounts :: TIAA Bank Securiti.ai Google Tag Manager End Google Tag Manager Ensighten bootstrap script [_nghost-c0] { display: block } [_nghost-c1] { display: block; width: 100% } .r34K7X1zGgAi6DllVF3T{box-sizing:border-box;border:0;margin:0;padding:0;overflow:hidden;display:none;z-index:2147483647;pointer-events:none;visibility:hidden;opacity:0;transition:opacity 300ms linear;height:0;width:0}.r34K7X1zGgAi6DllVF3T.active{display:block;visibility:visible}.r34K7X1zGgAi6DllVF3T.active.show{opacity:1;pointer-events:inherit;position:inherit}.r34K7X1zGgAi6DllVF3T.active.show.in-situ{width:inherit;height:inherit}.r34K7X1zGgAi6DllVF3T.active.show.lightbox{position:fixed;width:100% !important;height:100% !important;top:0;right:0;bottom:0;left:0}@-moz-document url-prefix(''){.r34K7X1zGgAi6DllVF3T{visibility:visible;display:block}} Cookie Policy googleoff: all TIAA Bank uses cookies to enhance site navigation, analyze site usage, and assist in our marketing efforts. By using our site you agree to our use of cookies as explained in our Cookie Policy. Decline I understand Cookie Preferences googleon: all End Google Tag Manager (noscript) Login Banking rates Which account is earning your interest? When we say we have your best financial interest in mind, we mean it. Visit here any time to see what you could be earning. savings All Checking Savings CDs All Checking Savings CDs Yield Pledge ® Checking Balances APY 1 $100,000 and up 0.25% $50,000 - $99,999.99 0.25% $25,000 - $49,999.99 0.25% $10,000 - $24,999.99 0.25% $0 - $9,999.99 0.25% Annual Percentage Yields (APYs) are accurate as of 03/31/2023 12:00 am (ET) . Learn More Yield Pledge ® Money Market Balances APY 2 $100,000 and up 3.70% $50,000 - $99,999.99 3.30% $25,000 - $49,999.99 2.90% $10,000 - $24,999.99 2.55% $0 - $9,999.99 1.75% Annual Percentage Yields (APYs) are accurate as of 03/31/2023 12:00 am (ET) . Learn More Basic Checking Balances APY 3 All balances 0.00% Annual Percentage Yields (APYs) are accurate as of 03/31/2023 12:00 am (ET) . Learn More Basic Savings Balances APY 4 All balances 3.85% Annual Percentage Yields (APYs) are accurate as of 03/31/2023 12:00 am (ET) . Learn More Basic CDs Term APY 5 3 month 4.00% 6 month 4.00% 9 month 4.35% 1 year 4.65% 1.5 year 4.50% 2 year 4.30% 2.5 year 4.00% 3 year 4.00% 4 year 3.95% 5 year 3.85% Annual Percentage Yields (APYs) are accurate as of 03/31/2023 12:00 am (ET) . Learn More 3.5-Year Bump Rate CD Term APY 6 3.5 year 4.00% Annual Percentage Yields (APYs) are accurate as of 03/31/2023 12:00 am (ET) . Learn More Call before 4 p.m. (ET) for same day rate bump. IntraFi ® Network Deposits ℠ – CD Option Account (formerly CDARS ® ) Term Funding Limit APY 7 3 month $8M 3.15% 6 month $8M 3.13% 1 year $8M 3.72% 2 year $1M 3.25% 3 year $0.5M 2.82% Annual Percentage Yields (APYs) are accurate as of 03/31/2023 12:00 am (ET) . Learn More Yield Pledge® CDs Rates are for renewing Yield Pledge CDs only. View rates Yield Pledge ® Checking Balances APY 1 $100,000 and up 0.25% $50,000 - $99,999.99 0.25% $25,000 - $49,999.99 0.25% $10,000 - $24,999.99 0.25% $0 - $9,999.99 0.25% Annual Percentage Yields (APYs) are accurate as of 03/31/2023 12:00 am (ET) . Learn More Basic Checking Balances APY 3 All balances 0.00% Annual Percentage Yields (APYs) are accurate as of 03/31/2023 12:00 am (ET) . Learn More Yield Pledge ® Money Market Balances APY 2 $100,000 and up 3.70% $50,000 - $99,999.99 3.30% $25,000 - $49,999.99 2.90% $10,000 - $24,999.99 2.55% $0 - $9,999.99 1.75% Annual Percentage Yields (APYs) are accurate as of 03/31/2023 12:00 am (ET) . Learn More Basic Savings Balances APY 4 All balances 3.85% Annual Percentage Yields (APYs) are accurate as of 03/31/2023 12:00 am (ET) . Learn More Basic CDs Term APY 5 3 month 4.00% 6 month 4.00% 9 month 4.35% 1 year 4.65% 1.5 year 4.50% 2 year 4.30% 2.5 year 4.00% 3 year 4.00% 4 year 3.95% 5 year 3.85% Annual Percentage Yields (APYs) are accurate as of 03/31/2023 12:00 am (ET) . Learn More 3.5-Year Bump Rate CD Term APY 6 3.5 year 4.00% Annual Percentage Yields (APYs) are accurate as of 03/31/2023 12:00 am (ET) . Learn More Call before 4 p.m. (ET) for same day rate bump. IntraFi ® Network Deposits ℠ – CD Option Account (formerly CDARS ® ) Term Funding Limit APY 7 3 month $8M 3.15% 6 month $8M 3.13% 1 year $8M 3.72% 2 year $1M 3.25% 3 year $0.5M 2.82% Annual Percentage Yields (APYs) are accurate as of 03/31/2023 12:00 am (ET) . Learn More Yield Pledge® CDs Rates are for renewing Yield Pledge CDs only. View rates Information to keep in mind 1. The quoted Yield Pledge ® Checking Account Annual Percentage Yields (APYs) are accurate as of 03/31/2023. This is a tiered, variable rate account and the APYS and balance tiers may change without notice. The variable APY applicable to the account each day is determined by the ending daily collected balance, as shown above. The required minimum opening deposit is $100. Fees may reduce earnings. 2. The quoted Yield Pledge ® Money Market Account Annual Percentage Yields (APYs) are accurate as of 03/31/2023. This is a tiered, variable rate account and the APYs and balance tiers may change without notice. The variable APY applicable to the account each day is determined by the ending daily collected balance, as shown above. The required minimum opening deposit is $500. Fees may reduce earnings. 3. The Basic Checking account is a non-interest bearing account with a required minimum opening deposit of $25. 4. The quoted Basic Savings Account Annual Percentage Yield (APY) is accurate as of 03/31/2023. This is a variable rate account and the APY may change without notice. The required minimum opening deposit is $25 (waived for residents of Rhode Island). Fees may reduce earnings. 5. The quoted Basic CD Annual Percentage Yields (APYs) are accurate as of 03/31/2023. APY assumes interest remains on deposit until maturity. These APYs are applicable to all CD principal balances. The required minimum opening deposit is $1,000. Early withdrawal penalties apply. Fees may reduce earnings. 6. The quoted Bump Rate CD Annual Percentage Yields (APYs) are accurate as of 03/31/2023. APY assumes that interest remains on deposit until maturity. These APYs are applicable to all CD principal balances. The required minimum opening deposit is $1,500. Early withdrawal penalties apply. Fees may reduce earnings. 7. The quoted IntraFi ® Network Deposits SM - CD Option account IntraFi CD Annual Percentage Yields (APYs) are accurate as of 03/31/2023, apply to the corresponding term also quoted with the APY, and assume that interest remains on deposit until maturity. APYs may change prior to account opening. CD terms of 3 months are limited to $8M. CD terms of 6 months are limited to $8M. CD terms of 1 year are limited to $8M. CD terms of 2 years are limited to $1M. CD terms of 3 years are limited to $0.5M. Early withdrawal penalties apply. Fees may reduce earnings. A minimum deposit of $10,000 is required to open the CD. Limits apply. Funds may be submitted for placement only after a depositor enters into an IntraFi Network Deposits CD Deposit Placement Agreement with us. This agreement contains important information and conditions regarding the placement of funds by us. IntraFi CDs are not funded and opened Placed immediately. The date your funds are received sets the earliest time your deposit can be Placed. See the IntraFi Network Deposits CD Deposit Placement Agreement for details. Deposits above single institution FDIC insurance limits will not benefit from higher insurance protection until the deposit is Placed. IntraFi CDs are Placed each week on Thursdays or the first Business Day thereafter. The IntraFi Network Deposits - CD Option account is formerly known as CDARS ® . Network Deposits is a service mark and IntraFi is a registered service mark of IntraFi Network LLC. 8. The quoted Yield Pledge ® CD interest rates and Annual Percentage Yields (APYs) are accurate as of 03/31/2023. APY assumes interest remains on deposit until maturity. The required minimum opening deposit is $5,000. Early withdrawal penalties apply. Fees may reduce earnings. icon recognition Our strong ratings, your peace of mind facebook twitter instagram linkedin Get in Touch Contact Us Financial Center Locations Feedback Find an ATM About TIAA Bank Discover TIAA Bank News & Press Careers Community Sponsorships More from TIAA About TIAA IRAs Mutual Funds Brokerage Accounts Managed Accounts Advisory Services Legal Terms & Conditions Terms of Use Privacy Policy FDIC Insurance Security Center Accessibility My Money Program Sitemap Do not sell or share my personal information TIAA Bank ® is a division of TIAA, FSB. © 2023 and prior years TIAA, FSB. TIAA, FSB NMLS ID: 399805 Yield Pledge ® Checking Balances APY 1 $100,000 and up 0.25% $50,000 - $99,999.99 0.25% $25,000 - $49,999.99 0.25% $10,000 - $24,999.99 0.25% $0 - $9,999.99 0.25% Annual Percentage Yields (APYs) are accurate as of 03/31/2023 12:00 am (ET) . Learn More Yield Pledge ® Money Market Balances APY 2 $100,000 and up 3.70% $50,000 - $99,999.99 3.30% $25,000 - $49,999.99 2.90% $10,000 - $24,999.99 2.55% $0 - $9,999.99 1.75% Annual Percentage Yields (APYs) are accurate as of 03/31/2023 12:00 am (ET) . Learn More Basic Checking Balances APY 3 All balances 0.00% Annual Percentage Yields (APYs) are accurate as of 03/31/2023 12:00 am (ET) . Learn More Basic Savings Balances APY 4 All balances 3.85% Annual Percentage Yields (APYs) are accurate as of 03/31/2023 12:00 am (ET) . Learn More 3.5-Year Bump Rate CD Term APY 6 3.5 year 4.00% Annual Percentage Yields (APYs) are accurate as of 03/31/2023 12:00 am (ET) . Learn More Call before 4 p.m. (ET) for same day rate bump. IntraFi ® Network Deposits ℠ – CD Option Account (formerly CDARS ® ) Term Funding Limit APY 7 3 month $8M 3.15% 6 month 1 year 2 year 3 year Annual Percentage Yields (APYs) are accurate as of . Learn More Basic CDs Term APY 5 3 month 4.00% 6 month 4.00% 9 month 1 year 1.5 year 2 year 2.5 year 3 year 4 year 5 year Annual Percentage Yields (APYs) are accurate as of . Learn More Information to keep in mind 1. The quoted Yield Pledge ® Checking Account Annual Percentage Yields (APYs) are accurate as of 03/31/2023. This is a tiered, variable rate account and the APYS and balance tiers may change without notice. The variable APY applicable to the account each day is determined by the ending daily collected balance, as shown above. The required minimum opening deposit is $100. Fees may reduce earnings. 2. The quoted Yield Pledge ® Money Market Account Annual Percentage Yields (APYs) are accurate as of 03/31/2023. This is a tiered, variable rate account and the APYs and balance tiers may change without notice. The variable APY applicable to the account each day is determined by the ending daily collected balance, as shown above. The required minimum opening deposit is $500. Fees may reduce earnings. 3. The Basic Checking account is a non-interest bearing account with a required minimum opening deposit of $25. 4. The quoted Basic Savings Account Annual Percentage Yield (APY) is accurate as of 03/31/2023. This is a variable rate account and the APY may change without notice. The required minimum opening deposit is $25 (waived for residents of Rhode Island). Fees may reduce earnings. 5. The quoted Basic CD Annual Percentage Yields (APYs) are accurate as of 03/31/2023. APY assumes interest remains on deposit until maturity. These APYs are applicable to all CD principal balances. The required minimum opening deposit is $1,000. Early withdrawal penalties apply. Fees may reduce earnings. 6. The quoted Bump Rate CD Annual Percentage Yields (APYs) are accurate as of 03/31/2023. APY assumes that interest remains on deposit until maturity. These APYs are applicable to all CD principal balances. The required minimum opening deposit is $1,500. Early withdrawal penalties apply. Fees may reduce earnings. 7. The quoted IntraFi ® Network Deposits SM - CD Option account IntraFi CD Annual Percentage Yields (APYs) are accurate as of 03/31/2023, apply to the corresponding term also quoted with the APY, and assume that interest remains on deposit until maturity. APYs may change prior to account opening. CD terms of 3 months are limited to $8M. CD terms of 6 months are limited to $8M. CD terms of 1 year are limited to $8M. CD terms of 2 years are limited to $1M. CD terms of 3 years are limited to $0.5M. Early withdrawal penalties apply. Fees may reduce earnings. A minimum deposit of $10,000 is required to open the CD. Limits apply. Funds may be submitted for placement only after a depositor enters into an IntraFi Network Deposits CD Deposit Placement Agreement with us. This agreement contains important information and conditions regarding the placement of funds by us. IntraFi CDs are not funded and opened Placed immediately. The date your funds are received sets the earliest time your deposit can be Placed. See the IntraFi Network Deposits CD Deposit Placement Agreement for details. Deposits above single institution FDIC insurance limits will not benefit from higher insurance protection until the deposit is Placed. IntraFi CDs are Placed each week on Thursdays or the first Business Day thereafter. The IntraFi Network Deposits - CD Option account is formerly known as CDARS ® . Network Deposits is a service mark and IntraFi is a registered service mark of IntraFi Network LLC. 8. The quoted Yield Pledge ® CD interest rates and Annual Percentage Yields (APYs) are accurate as of 03/31/2023. APY assumes interest remains on deposit until maturity. The required minimum opening deposit is $5,000. Early withdrawal penalties apply. Fees may reduce earnings. /* Banner */"


def get_apys(raw_text):
    completion = openai.ChatCompletion.create(
        model="gpt-3.5-turbo-0301",
        messages=[{
            "role": "user",
            "content": "The following text is raw text from the HTML page of a bank advertising its savings accounts. From this raw "
                       "text, I want you to find all of the APY%s, and the specific deal, account, or offer that that APY% is "
                       "associated with. Then, make a table with the following column names: \"Offer Name\", \"APY%\", and fill"
                       "the table with the proper information that you got from the raw text. Here is the "
                       "raw text: {}".format(raw_text)
        }],
    )
    print(completion.choices[0].message)


if __name__ == '__main__':
    get_apys(test_prompt)
